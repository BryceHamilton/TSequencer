(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,t,a){e.exports=a(22)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),o=a.n(i),s=(a(17),a(1)),c=a(2),u=a(4),p=a(3),l=a(6),d=a(5),h=(a(18),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).toggle=function(){var e=!a.state.activated;a.setState({activated:e}),a.props.toggleFunc(a.props.id,e)},a.state={activated:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.step,r=this.state.activated,i="";return i=a===t?"step":r?"ena":"dis",n.createElement("div",{className:i,onClick:this.toggle})}}]),t}(n.Component)),v=(a(19),function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).toggle=function(e,t){var n=a.state.steps;n[e]=t,a.setState({steps:n})},a.volumeChange=function(e){var n=parseInt(e.currentTarget.value)||t.DEFAULT_VOLUME;a.setState({volume:n})},a.panChange=function(e){var n=parseFloat(e.currentTarget.value)||t.DEFAULT_PAN;a.setState({pan:n})},a.handleDragOver=function(e){e.preventDefault()},a.handleDrop=function(e){if(e.preventDefault(),e.stopPropagation(),0!==e.dataTransfer.files.length){var t=e.dataTransfer.files[0];a.props.audio.updateSoundWithFile(t)}};var n=new Array(e.numSteps).fill(!1);return a.state={steps:n,toPlay:!1,prevStep:a.props.step,volume:t.DEFAULT_VOLUME,pan:t.DEFAULT_PAN},a.toggle=a.toggle.bind(Object(l.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t="sequencer";return this.state.steps[this.props.step]&&this.props.step!==this.state.prevStep&&(t="seqActive",this.setState({prevStep:this.props.step}),this.props.audio.play(this.state.volume,this.state.pan)),n.createElement("div",{className:t,onDragOver:this.handleDragOver,onDrop:this.handleDrop},this.state.steps.map(function(t,a){return n.createElement(h,{key:"".concat(e.props.id).concat(a),id:a,step:e.props.step,toggleFunc:e.toggle})}),n.createElement("div",null,n.createElement("span",null,this.props.audio.filename),n.createElement("input",{className:"slider",type:"range",min:"1",max:"100",defaultValue:"100",id:"volumeSlider",onInput:this.volumeChange}),n.createElement("input",{className:"slider",type:"range",step:".1",min:"-1",max:"1",defaultValue:"0",id:"panSlider",onChange:this.panChange})))}}]),t}(n.Component));v.DEFAULT_VOLUME=100,v.DEFAULT_PAN=0;var f=v,m=a(7),b=a.n(m),g=a(8),w=function(){function e(t,a){Object(s.a)(this,e),this.audioContext=void 0,this.filename=void 0,this.buffer=null,this.gainNode=void 0,this.panNode=void 0,this.audioContext=t,this.filename=a.split("/").slice(-1)[0],this.gainNode=t.createGain(),this.panNode=t.createStereoPanner(),this.panNode.connect(this.gainNode),this.gainNode.connect(t.destination),this.loadSoundByHttp(a)}return Object(c.a)(e,[{key:"loadSoundByHttp",value:function(e){var t=this,a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=Object(g.a)(b.a.mark(function n(){var r;return b.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.response,n.prev=1,n.next=4,t.audioContext.decodeAudioData(r);case 4:t.buffer=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),console.error("Error with decoding audio from ".concat(e,", ").concat(n.t0.message));case 10:case"end":return n.stop()}},n,null,[[1,7]])})),a.send()}},{key:"updateSoundWithFile",value:function(e){var t=this;if(e.name.endsWith(".wav")){var a=new FileReader;a.onload=Object(g.a)(b.a.mark(function n(){var r;return b.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.result,n.prev=1,n.next=4,t.audioContext.decodeAudioData(r);case 4:t.buffer=n.sent,t.filename=e.name,n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.error("Error with decoding audio from ".concat(e.name,", ").concat(n.t0.message));case 11:case"end":return n.stop()}},n,null,[[1,8]])})),a.readAsArrayBuffer(e)}}},{key:"play",value:function(e,t){null==this.buffer&&console.error("Buffer is null for ".concat(this.filename)),this.gainNode.gain.value=e/100,this.panNode.pan.value=t;var a=this.audioContext.createBufferSource();a.buffer=this.buffer,a.connect(this.panNode),a.start(0)}}]),e}(),E=["clap01.wav","clap02.wav","closedhat01.wav","closedhat02.wav","drop.wav","kick01.wav","kick02.wav","laser.wav","openhat01.wav","openhat02.wav","snare01.wav","snare02.wav","tom01.wav","tom02.wav","tom03.wav"],S=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).timer=0,a.updateBPM=function(){var e=a.props.bpm;a.setState({bpm:e,interval:Math.ceil(6e4/e)}),clearInterval(a.timer),a.timer=window.setInterval(function(){a.tick()},a.state.interval)};var n=e.bpm,r=E.map(function(e){return new w(a.props.audioContext,"/audio/".concat(e))});return a.state={step:0,interval:Math.ceil(6e4/n),audioRefs:r,bpm:n},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"tick",value:function(){var e=(this.state.step+1)%t.NUM_STEPS;this.setState({step:e})}},{key:"componentDidMount",value:function(){var e=this;this.timer=window.setInterval(function(){e.tick()},this.state.interval)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){this.props.bpm!==this.state.bpm&&this.updateBPM();for(var e=[],a=0;a<this.props.numSequencers;a++){var r=this.state.audioRefs[a%this.state.audioRefs.length];e.push(n.createElement(f,{key:a,id:a,numSteps:t.NUM_STEPS,step:this.state.step,audio:r}))}return e}}]),t}(n.Component);S.NUM_STEPS=64;var O=S,k=(a(21),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).bpmChange=function(e){var t=parseInt(e.currentTarget.value)||120;a.setState({bpm:t})},a.state={bpm:t.DEFAULT_BPM,audioContext:new AudioContext},a.bpmChange=a.bpmChange.bind(Object(l.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,this.state.bpm+"bpm",r.a.createElement("input",{className:"bpmslider",type:"range",min:"30",max:"600",defaultValue:"120",onChange:this.bpmChange})),r.a.createElement(O,{key:"SequencerContainer",bpm:this.state.bpm,numSequencers:t.NUM_SEQUENCERS,audioContext:this.state.audioContext}))}}]),t}(r.a.Component));k.DEFAULT_BPM=120,k.NUM_SEQUENCERS=15;var C=k;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[11,1,2]]]);
//# sourceMappingURL=main.b21c08aa.chunk.js.map